<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Tweets</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>

</head>

<script>
{% block jquery %}
var endpoint = '/api/chart/data/'
var defaultData = []
var labels = []
$.ajax({
	method: "GET",
	url: endpoint,
	success: function(data){
		labels = data.labels
		defaultData = data.default
		console.log(data.labels)

		var ctx = document.getElementById("myChart");
		  var lineChart = new Chart(ctx, {
		    type: 'line',
		    data: {
		      labels: labels,
		      datasets: [{
		        label: "Tweet Stock",
		        data: defaultData
		      }]
		    }
		  })
	},
	error: function(error_data){
		console.log("error")
		console.log(error_data)
	}
})

/*window.onload = function() {
  var ctx = document.getElementById("myChart");
  var lineChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [{
        label: "Tweet Stock",
        data: defaultData
      }]
    }
  })
}*/

{% endblock %}
</script>


<body>
	<div class="row">
		<div class="col-sm-3">
			Tweets for: {{ username }}
		</div>
		<div class="col-sm-3">
			Positive Tweets: {{ positives }}
		</div>
		<div class="col-sm-3">
			Neutral Tweets: {{ neutrals }}
		</div>
		<div class="col-sm-3">
			Negative Tweets: {{ negatives }}
		</div>
	</div>

	<br>
	<br>
	
	<div class="row justify-content-center" >
		<div class="col-lg-12">
			<canvas id="myChart" height="75"></canvas>
		</div>
	</div>


</body>


<div class="row">
	<div class="col-lg-6">
		<h2>TWEETS</h2>
		{% for tweet in tweets %}

		{{tweet}}
		<br/>

		{% endfor %}
	</div>


	<div class="col-lg-6">
		<h2>LIKES</h2>
		{% for like in likes %}

		{{like}}


		{% endfor %}
		<br/>		
		
	</div>





</div>

<a href="{% url 'home'%}">Start Again</a>
</html>